{"is_source_file": true, "format": "JavaScript", "description": "This file implements a client for interacting with a Notes API, with fallback to localStorage. It includes functions for CRUD operations on notes, error normalization, and network request handling with timeout and error management. It also dynamically constructs the backend URL from environment variables.", "external_files": ["./storage"], "external_methods": ["makeUuid", "normalizeNote", "readNotes", "writeNotes"], "published": ["isBackendEnabled", "listNotes", "getNote", "createNote", "updateNote", "deleteNote"], "classes": [], "methods": [{"name": "normalizeError(err, fallbackCode = \"UNKNOWN\", fallbackMessage = \"Unexpected error\")", "description": "Creates a normalized error object from various error formats, providing a consistent structure with code and message.", "scope": "", "scopeKind": ""}, {"name": "computeBaseUrl()", "description": "Constructs the base URL for the backend API from environment variables, returning null if not configured.", "scope": "", "scopeKind": ""}, {"name": "safeFetchInternal(url, options = {})", "description": "Performs fetch with timeout and error normalization, aborting the request if it exceeds the specified timeout.", "scope": "", "scopeKind": ""}, {"name": "safeFetch(url, options = {})", "description": "A wrapper around safeFetchInternal with default 8-second timeout, propagating normalized errors.", "scope": "", "scopeKind": ""}, {"name": "parseJson(res)", "description": "Safely parses JSON response text; throws a normalized error if parsing fails.", "scope": "", "scopeKind": ""}, {"name": "throwIfNotOk(res)", "description": "Checks the HTTP response status and throws a normalized error if the response indicates failure.", "scope": "", "scopeKind": ""}, {"name": "localListNotes()", "description": "Retrieves notes from localStorage, sorted with the most recently updated first.", "scope": "", "scopeKind": ""}, {"name": "localGetNote(id)", "description": "Retrieves a single note by ID from localStorage.", "scope": "", "scopeKind": ""}, {"name": "localCreateNote(note)", "description": "Creates a new note, assigns it a UUID and timestamps, then saves it to localStorage.", "scope": "", "scopeKind": ""}, {"name": "localUpdateNote(id, partial)", "description": "Updates an existing note in localStorage identified by ID with partial data.", "scope": "", "scopeKind": ""}, {"name": "localDeleteNote(id)", "description": "Deletes a note by ID from localStorage.", "scope": "", "scopeKind": ""}, {"name": "backendListNotes(baseUrl)", "description": "Fetches the list of notes from the backend API.", "scope": "", "scopeKind": ""}, {"name": "backendGetNote(baseUrl, id)", "description": "Fetches a single note by ID from the backend API.", "scope": "", "scopeKind": ""}, {"name": "backendCreateNote(baseUrl, note)", "description": "Creates a new note on the backend API.", "scope": "", "scopeKind": ""}, {"name": "backendUpdateNote(baseUrl, id, partial)", "description": "Updates a note by ID on the backend API.", "scope": "", "scopeKind": ""}, {"name": "backendDeleteNote(baseUrl, id)", "description": "Deletes a note by ID on the backend API.", "scope": "", "scopeKind": ""}, {"name": "listNotes()", "description": "Public function to list all notes, using backend or localStorage fallback.", "scope": "", "scopeKind": ""}, {"name": "getNote(id)", "description": "Public function to retrieve a single note by ID, from backend or localStorage fallback.", "scope": "", "scopeKind": ""}, {"name": "createNote(note)", "description": "Public function to create a note, either on backend or locally.", "scope": "", "scopeKind": ""}, {"name": "updateNote(id, partial)", "description": "Public function to update a note by ID, using backend or localStorage fallback.", "scope": "", "scopeKind": ""}, {"name": "deleteNote(id)", "description": "Public function to delete a note by ID, with backend or localStorage fallback.", "scope": "", "scopeKind": ""}, {"name": "isBackendEnabled()", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["fetch", "normalizeError", "parseJson", "throwIfNotOk", "readNotes", "writeNotes", "makeUuid", "normalizeNote"], "search-terms": ["Notes API", "CRUD fallback", "localStorage", "environment variables", "fetch with timeout", "normalize error"], "state": 2, "file_id": 14, "knowledge_revision": 32, "git_revision": "3c06888ece6961e2015f42ec1ca0840740eac17e", "ctags": [{"_type": "tag", "name": "backendCreateNote", "path": "/home/kavia/workspace/code-generation/simple-notes-app-304750-304841/notes_frontend/src/api/client.js", "pattern": "/^async function backendCreateNote(baseUrl, note) {$/", "language": "JavaScript", "kind": "function", "signature": "(baseUrl, note)"}, {"_type": "tag", "name": "backendDeleteNote", "path": "/home/kavia/workspace/code-generation/simple-notes-app-304750-304841/notes_frontend/src/api/client.js", "pattern": "/^async function backendDeleteNote(baseUrl, id) {$/", "language": "JavaScript", "kind": "function", "signature": "(baseUrl, id)"}, {"_type": "tag", "name": "backendGetNote", "path": "/home/kavia/workspace/code-generation/simple-notes-app-304750-304841/notes_frontend/src/api/client.js", "pattern": "/^async function backendGetNote(baseUrl, id) {$/", "language": "JavaScript", "kind": "function", "signature": "(baseUrl, id)"}, {"_type": "tag", "name": "backendListNotes", "path": "/home/kavia/workspace/code-generation/simple-notes-app-304750-304841/notes_frontend/src/api/client.js", "pattern": "/^async function backendListNotes(baseUrl) {$/", "language": "JavaScript", "kind": "function", "signature": "(baseUrl)"}, {"_type": "tag", "name": "backendUpdateNote", "path": "/home/kavia/workspace/code-generation/simple-notes-app-304750-304841/notes_frontend/src/api/client.js", "pattern": "/^async function backendUpdateNote(baseUrl, id, partial) {$/", "language": "JavaScript", "kind": "function", "signature": "(baseUrl, id, partial)"}, {"_type": "tag", "name": "computeBaseUrl", "path": "/home/kavia/workspace/code-generation/simple-notes-app-304750-304841/notes_frontend/src/api/client.js", "pattern": "/^function computeBaseUrl() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "createNote", "path": "/home/kavia/workspace/code-generation/simple-notes-app-304750-304841/notes_frontend/src/api/client.js", "pattern": "/^export async function createNote(note) {$/", "language": "JavaScript", "kind": "function", "signature": "(note)"}, {"_type": "tag", "name": "deleteNote", "path": "/home/kavia/workspace/code-generation/simple-notes-app-304750-304841/notes_frontend/src/api/client.js", "pattern": "/^export async function deleteNote(id) {$/", "language": "JavaScript", "kind": "function", "signature": "(id)"}, {"_type": "tag", "name": "getNote", "path": "/home/kavia/workspace/code-generation/simple-notes-app-304750-304841/notes_frontend/src/api/client.js", "pattern": "/^export async function getNote(id) {$/", "language": "JavaScript", "kind": "function", "signature": "(id)"}, {"_type": "tag", "name": "isBackendEnabled", "path": "/home/kavia/workspace/code-generation/simple-notes-app-304750-304841/notes_frontend/src/api/client.js", "pattern": "/^export function isBackendEnabled() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "listNotes", "path": "/home/kavia/workspace/code-generation/simple-notes-app-304750-304841/notes_frontend/src/api/client.js", "pattern": "/^export async function listNotes() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "localCreateNote", "path": "/home/kavia/workspace/code-generation/simple-notes-app-304750-304841/notes_frontend/src/api/client.js", "pattern": "/^function localCreateNote(note) {$/", "language": "JavaScript", "kind": "function", "signature": "(note)"}, {"_type": "tag", "name": "localDeleteNote", "path": "/home/kavia/workspace/code-generation/simple-notes-app-304750-304841/notes_frontend/src/api/client.js", "pattern": "/^function localDeleteNote(id) {$/", "language": "JavaScript", "kind": "function", "signature": "(id)"}, {"_type": "tag", "name": "localGetNote", "path": "/home/kavia/workspace/code-generation/simple-notes-app-304750-304841/notes_frontend/src/api/client.js", "pattern": "/^function localGetNote(id) {$/", "language": "JavaScript", "kind": "function", "signature": "(id)"}, {"_type": "tag", "name": "localListNotes", "path": "/home/kavia/workspace/code-generation/simple-notes-app-304750-304841/notes_frontend/src/api/client.js", "pattern": "/^function localListNotes() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "localUpdateNote", "path": "/home/kavia/workspace/code-generation/simple-notes-app-304750-304841/notes_frontend/src/api/client.js", "pattern": "/^function localUpdateNote(id, partial) {$/", "language": "JavaScript", "kind": "function", "signature": "(id, partial)"}, {"_type": "tag", "name": "normalizeError", "path": "/home/kavia/workspace/code-generation/simple-notes-app-304750-304841/notes_frontend/src/api/client.js", "pattern": "/^function normalizeError(err, fallbackCode = \"UNKNOWN\", fallbackMessage = \"Unexpected error\") {$/", "language": "JavaScript", "kind": "function", "signature": "(err, fallbackCode = \"UNKNOWN\", fallbackMessage = \"Unexpected error\")"}, {"_type": "tag", "name": "parseJson", "path": "/home/kavia/workspace/code-generation/simple-notes-app-304750-304841/notes_frontend/src/api/client.js", "pattern": "/^async function parseJson(res) {$/", "language": "JavaScript", "kind": "function", "signature": "(res)"}, {"_type": "tag", "name": "safeFetch", "path": "/home/kavia/workspace/code-generation/simple-notes-app-304750-304841/notes_frontend/src/api/client.js", "pattern": "/^export async function safeFetch(url, options = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(url, options = {})"}, {"_type": "tag", "name": "safeFetchInternal", "path": "/home/kavia/workspace/code-generation/simple-notes-app-304750-304841/notes_frontend/src/api/client.js", "pattern": "/^async function safeFetchInternal(url, options = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(url, options = {})"}, {"_type": "tag", "name": "throwIfNotOk", "path": "/home/kavia/workspace/code-generation/simple-notes-app-304750-304841/notes_frontend/src/api/client.js", "pattern": "/^async function throwIfNotOk(res) {$/", "language": "JavaScript", "kind": "function", "signature": "(res)"}, {"_type": "tag", "name": "updateNote", "path": "/home/kavia/workspace/code-generation/simple-notes-app-304750-304841/notes_frontend/src/api/client.js", "pattern": "/^export async function updateNote(id, partial) {$/", "language": "JavaScript", "kind": "function", "signature": "(id, partial)"}], "hash": "89f1018a9bd5dd2cdc7ee58fbc4d6fea", "format-version": 4, "code-base-name": "notes_frontend", "filename": "notes_frontend/src/api/client.js", "revision_history": [{"32": "3c06888ece6961e2015f42ec1ca0840740eac17e"}]}